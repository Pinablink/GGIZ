package mail

import (
	"fmt"
	"log"
	"net/smtp"
)

// Send Envia email utilizando os parÃ¢metros informados
func (ggmail *GGMail) Send(refserversmtp GGServerMail) {
	dest := make([]string, 1)
	dest[0] = ggmail.to

	sMessage := "Subject:" + ggmail.cMessage.subject + "\n\n" + ggmail.cMessage.message
        fmt.Println(refserversmtp.Serversmtp)
        fmt.Println(refserversmtp.Pathserver)
	err := smtp.SendMail(refserversmtp.Serversmtp,
		smtp.PlainAuth("", "smtp.gmail.com:587", ggmail.pass, refserversmtp.Pathserver),
		ggmail.from,
		dest,
		[]byte(sMessage))

	if err != nil {
		log.Fatal(err)
	} else {
		fmt.Println("Email enviado...")
	}

}
