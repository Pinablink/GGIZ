/*
Autor: Weber Alves dos Santos (Pinablink)
Responsavel pelo controle operacional da aplicacao
*/
;----------------------------------------------------------------------------------------------
#include "msp430g2553.h"
#include "/../header/ggiz_header.h"
;----------------------------------------------------------------------------------------------
        NAME   GGIZ_OPER
        PUBLIC GGIZ_LOAD
        RSEG   CODE           
;----------------------------------------------------------------------------------------------
GGIZ_LOAD ;VERIFICACAO INICIAL DO BIT DE STATUS PARA EFETUAR A EXECUÇÃO
;----------------------------------------------------------------------------------------------
                   BIT.B    #BIT1, R15
                   JC       SUPORT_SERIAL
                   JMP      PERSON_RUN      
SUPORT_SERIAL:     CALL     #GGIZ_SUPORT_SERIAL      
                   JMP      END_CICLE
PERSON_RUN:        NOP
END_CICLE:         RET
;----------------------------------------------------------------------------------------------
;----------------------------------------------------------------------------------------------
GGIZ_SUPORT_SERIAL
;----------------------------------------------------------------------------------------------
                   CMP.W    #08002H,R15
                   JNE      NOGOG1
GOG1:              CALL     #GGIZ_SUPORT_SERIAL_LOAD    
                   JMP      END01
NOGOG1:            CALL     #CALIB_1MHZ
                   MOV.W    #08002H,R15
END01:             RET
;----------------------------------------------------------------------------------------------
;----------------------------------------------------------------------------------------------
GGIZ_SUPORT_SERIAL_LOAD
;----------------------------------------------------------------------------------------------
                   NOP
                   RET
;----------------------------------------------------------------------------------------------
;----------------------------------------------------------------------------------------------
CALIB_1MHZ ; CONFIGURA O CLOCK DE OPERAÇÃO DO HARDWARE PARA 1MHZ
;----------------------------------------------------------------------------------------------
                  mov.b  &CALBC1_1MHZ,&BCSCTL1
                  mov.b  &CALDCO_1MHZ,&DCOCTL
                  ret 
;----------------------------------------------------------------------------------------------
;----------------------------------------------------------------------------------------------
       END  
;----------------------------------------------------------------------------------------------